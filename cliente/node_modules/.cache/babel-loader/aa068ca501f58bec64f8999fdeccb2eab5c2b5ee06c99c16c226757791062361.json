{"ast":null,"code":"var _jsxFileName = \"/home/eliezer/Projetos/globo-teste-tecnico/client/client/src/components/LoginComponent.jsx\";\nimport React from \"react\";\nimport { toast } from \"react-toastify\";\nimport FormComponent from \"./common/FormComponent\";\nimport { loginSchema } from \"./../util/JoiSchema\";\nimport InputFieldComponent from \"./common/InputFieldComponent\";\nimport { login } from \"./../services/user\";\nimport { isJsonObjEmpty } from \"./../util/utils\";\nimport { setTokenToCookie, decodeToken } from \"../util/authentication\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass LoginComponent extends FormComponent {\n  constructor(props) {\n    super(props);\n    this.schema = loginSchema;\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        data\n      } = this.state;\n      const {\n        setUserInfo,\n        history,\n        toggleLoaderDisplay\n      } = this.props;\n      await this.validateInput(data, this.schema);\n      if (isJsonObjEmpty(this.state.errors)) {\n        toggleLoaderDisplay();\n        const {\n          status,\n          data: authToken\n        } = await login(data);\n        toggleLoaderDisplay();\n        if (200 === status) {\n          setTokenToCookie(authToken);\n          setUserInfo(decodeToken());\n          history.push(\"/movies\");\n        }\n      }\n    };\n    this.signUp = e => this.props.history.push(\"/sign_up\");\n    this.state = {\n      data: {\n        emailId: \"\",\n        password: \"\"\n      },\n      errors: {}\n    };\n  }\n  render() {\n    const {\n      data,\n      errors\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: this.handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputFieldComponent, {\n        type: \"text\",\n        value: data[\"emailId\"],\n        error: errors[\"emailId\"],\n        onChange: this.handleChange,\n        name: \"emailId\",\n        label: \"Email ID\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputFieldComponent, {\n        type: \"password\",\n        value: data[\"password\"],\n        error: errors[\"password\"],\n        onChange: this.handleChange,\n        name: \"password\",\n        label: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary btn-sm\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"New User... Create an \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          onClick: this.signUp,\n          children: \"Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default LoginComponent;","map":{"version":3,"names":["React","toast","FormComponent","loginSchema","InputFieldComponent","login","isJsonObjEmpty","setTokenToCookie","decodeToken","LoginComponent","constructor","props","schema","handleSubmit","e","preventDefault","data","state","setUserInfo","history","toggleLoaderDisplay","validateInput","errors","status","authToken","push","signUp","emailId","password","render","handleChange"],"sources":["/home/eliezer/Projetos/globo-teste-tecnico/client/client/src/components/LoginComponent.jsx"],"sourcesContent":["import React from \"react\";\nimport { toast } from \"react-toastify\";\nimport FormComponent from \"./common/FormComponent\";\nimport { loginSchema } from \"./../util/JoiSchema\";\nimport InputFieldComponent from \"./common/InputFieldComponent\";\nimport { login } from \"./../services/user\";\nimport { isJsonObjEmpty } from \"./../util/utils\";\nimport { setTokenToCookie, decodeToken } from \"../util/authentication\";\n\nclass LoginComponent extends FormComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {\n        emailId: \"\",\n        password: \"\"\n      },\n      errors: {}\n    };\n  }\n\n  schema = loginSchema;\n\n  handleSubmit = async e => {\n    e.preventDefault();\n    const { data } = this.state;\n    const { setUserInfo, history, toggleLoaderDisplay } = this.props;\n    await this.validateInput(data, this.schema);\n    if (isJsonObjEmpty(this.state.errors)) {\n      toggleLoaderDisplay();\n      const { status, data: authToken } = await login(data);\n      toggleLoaderDisplay();\n\n      if (200 === status) {\n        setTokenToCookie(authToken);\n        setUserInfo(decodeToken());\n        history.push(\"/movies\");\n      }\n    }\n  };\n\n  signUp = e => this.props.history.push(\"/sign_up\");\n\n  render() {\n    const { data, errors } = this.state;\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <h1>Login</h1>\n        <InputFieldComponent\n          type=\"text\"\n          value={data[\"emailId\"]}\n          error={errors[\"emailId\"]}\n          onChange={this.handleChange}\n          name=\"emailId\"\n          label=\"Email ID\"\n        />\n        <InputFieldComponent\n          type=\"password\"\n          value={data[\"password\"]}\n          error={errors[\"password\"]}\n          onChange={this.handleChange}\n          name=\"password\"\n          label=\"Password\"\n        />\n\n        <button className=\"btn btn-secondary btn-sm\">Submit</button>\n        <br />\n        <br />\n        <p>\n          {\"New User... Create an \"}\n          <a href=\"#\" onClick={this.signUp}>\n            Account\n          </a>\n        </p>\n      </form>\n    );\n  }\n}\n\nexport default LoginComponent;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}